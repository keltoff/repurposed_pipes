[gd_scene load_steps=17 format=4 uid="uid://dredt2euhd4sp"]

[ext_resource type="Texture2D" uid="uid://irq2uedvugdh" path="res://img/pipes_rotated.png" id="1_d5x1h"]
[ext_resource type="Texture2D" uid="uid://dwtwaudq33xr0" path="res://img/Gold_Border.png" id="1_gyfs4"]
[ext_resource type="Texture2D" uid="uid://cyqb2u5yb6mt0" path="res://img/pipes_atlas.tres" id="4_hq1ik"]
[ext_resource type="Script" uid="uid://cpy82sfmefxmw" path="res://new_block.gd" id="4_nfk4m"]
[ext_resource type="Script" uid="uid://b8avmi6foffyj" path="res://block_part.gd" id="5_8mm7a"]
[ext_resource type="Script" uid="uid://ddylbgh304wo0" path="res://piece_queue.gd" id="6_7ycvg"]

[sub_resource type="TileMapPattern" id="TileMapPattern_gyfs4"]
tile_data = PackedInt32Array(0, 65537, 0, 1, 65537, 0, 2, 65537, 0, 3, 65537, 0)

[sub_resource type="TileMapPattern" id="TileMapPattern_d5x1h"]
tile_data = PackedInt32Array(65536, 65537, 0, 1, 1, 0, 65537, 1, 805306368, 2, 65537, 0)

[sub_resource type="TileMapPattern" id="TileMapPattern_8mm7a"]
tile_data = PackedInt32Array(65536, 65537, 0, 1, 65537, 1610612736, 65537, 131073, 805306368, 65538, 65537, 0)

[sub_resource type="TileMapPattern" id="TileMapPattern_hq1ik"]
tile_data = PackedInt32Array(0, 196609, 0, 65536, 196609, 0, 1, 196609, 0, 65537, 196609, 0)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_8mm7a"]
resource_name = "Pipes"
texture = ExtResource("1_d5x1h")
texture_region_size = Vector2i(32, 32)
3:0/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
1:2/0 = 0
2:2/0 = 0
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
3:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0

[sub_resource type="TileSet" id="TileSet_gyfs4"]
tile_size = Vector2i(32, 32)
physics_layer_0/collision_layer = 1
terrain_set_0/mode = 0
terrain_set_0/terrain_0/name = "Terrain 0"
terrain_set_0/terrain_0/color = Color(0.5, 0.34375, 0.25, 1)
sources/0 = SubResource("TileSetAtlasSource_8mm7a")
pattern_0 = SubResource("TileMapPattern_gyfs4")
pattern_1 = SubResource("TileMapPattern_d5x1h")
pattern_2 = SubResource("TileMapPattern_8mm7a")
pattern_3 = SubResource("TileMapPattern_hq1ik")

[sub_resource type="AtlasTexture" id="AtlasTexture_hq1ik"]
atlas = ExtResource("4_hq1ik")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_nfk4m"]
atlas = ExtResource("4_hq1ik")
region = Rect2(0, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_66tet"]
atlas = ExtResource("4_hq1ik")
region = Rect2(96, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_7ycvg"]
atlas = ExtResource("4_hq1ik")
region = Rect2(32, 32, 32, 32)

[node name="Node2D" type="Node2D"]

[node name="Frame" type="NinePatchRect" parent="."]
offset_left = 122.0
offset_top = 61.0
offset_right = 536.0
offset_bottom = 547.0
texture = ExtResource("1_gyfs4")
draw_center = false
region_rect = Rect2(-0.1139431, -0.04946804, 40.40973, 56.330612)
patch_margin_left = 4
patch_margin_top = 4
patch_margin_right = 4
patch_margin_bottom = 4
axis_stretch_horizontal = 2
axis_stretch_vertical = 1

[node name="Tiles" type="TileMapLayer" parent="Frame"]
unique_name_in_owner = true
position = Vector2(190, 35)
tile_map_data = PackedByteArray("AAD5////AAACAAIAAAD5/wAAAAACAAIAAAD5/wEAAAACAAIAAAD5/wIAAAACAAIAAAD5/wMAAAADAAMAAAD5/wQAAAACAAIAAAD5/wUAAAACAAIAAAD5/wYAAAACAAIAAAD5/wcAAAACAAIAAAD5/wkAAAACAAIAAAD5/woAAAACAAIAAAD5/wgAAAACAAIAAAAHAP//AAACAAIAAAAHAAAAAAACAAIAAAAHAAEAAAACAAIAAAAHAAIAAAACAAIAAAAHAAQAAAACAAIAAAAHAAUAAAACAAIAAAAHAAYAAAACAAIAAAAHAAcAAAACAAIAAAAHAAgAAAACAAIAAAAHAAkAAAACAAIAAAAHAAoAAAACAAIAAAAHAAsAAAACAAIAAAAHAAwAAAACAAIAAAAHAA0AAAACAAIAAAD5/wsAAAACAAIAAAD5/wwAAAACAAIAAAD5/w0AAAACAAIAAAD6/w4AAAABAAEAAAD7/w4AAAABAAEAAAD8/w4AAAABAAEAAAD9/w4AAAABAAEAAAD+/w4AAAABAAEAAAD//w4AAAADAAMAAAAAAA4AAAABAAEAAAABAA4AAAABAAEAAAACAA4AAAABAAEAAAADAA4AAAADAAMAAAAEAA4AAAABAAEAAAAFAA4AAAABAAEAAAAGAA4AAAABAAEAAAD5/w4AAAABAAIAAAAHAA4AAAAAAAMAAAAHAAMAAAADAAMAAAA=")
tile_set = SubResource("TileSet_gyfs4")

[node name="NewBlock" type="Node2D" parent="."]
position = Vector2(306, 84)
script = ExtResource("4_nfk4m")

[node name="BlockPart" type="Sprite2D" parent="NewBlock"]
position = Vector2(-32, 32)
texture = SubResource("AtlasTexture_hq1ik")
script = ExtResource("5_8mm7a")
atlas_coordinates = Vector2i(1, 1)
metadata/_custom_type_script = "uid://b8avmi6foffyj"

[node name="BlockPart2" type="Sprite2D" parent="NewBlock"]
position = Vector2(0, 32)
texture = SubResource("AtlasTexture_nfk4m")
script = ExtResource("5_8mm7a")
atlas_coordinates = Vector2i(0, 3)
metadata/_custom_type_script = "uid://b8avmi6foffyj"

[node name="BlockPart3" type="Sprite2D" parent="NewBlock"]
texture = SubResource("AtlasTexture_66tet")
script = ExtResource("5_8mm7a")
atlas_coordinates = Vector2i(3, 0)
metadata/_custom_type_script = "uid://b8avmi6foffyj"

[node name="BlockPart4" type="Sprite2D" parent="NewBlock"]
position = Vector2(32, 0)
texture = SubResource("AtlasTexture_7ycvg")
script = ExtResource("5_8mm7a")
atlas_coordinates = Vector2i(1, 1)
metadata/_custom_type_script = "uid://b8avmi6foffyj"

[node name="Timer" type="Timer" parent="."]
process_callback = 0
wait_time = 0.25
autostart = true

[node name="PieceQueue" type="NinePatchRect" parent="."]
unique_name_in_owner = true
offset_left = 610.0
offset_top = 45.0
offset_right = 1618.0
offset_bottom = 243.0
scale = Vector2(0.5, 0.5)
texture = ExtResource("1_gyfs4")
patch_margin_left = 4
patch_margin_top = 4
patch_margin_right = 4
patch_margin_bottom = 4
axis_stretch_horizontal = 1
axis_stretch_vertical = 1
script = ExtResource("6_7ycvg")

[connection signal="timeout" from="Timer" to="NewBlock" method="_on_timer_timeout"]
